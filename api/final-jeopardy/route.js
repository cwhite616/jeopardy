"use strict";(()=>{var e={};e.id=654,e.ids=[654],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},2048:e=>{e.exports=require("fs")},2615:e=>{e.exports=require("http")},5240:e=>{e.exports=require("https")},5315:e=>{e.exports=require("path")},8621:e=>{e.exports=require("punycode")},6162:e=>{e.exports=require("stream")},7360:e=>{e.exports=require("url")},1764:e=>{e.exports=require("util")},2623:e=>{e.exports=require("worker_threads")},1568:e=>{e.exports=require("zlib")},7561:e=>{e.exports=require("node:fs")},4492:e=>{e.exports=require("node:stream")},2477:e=>{e.exports=require("node:stream/web")},5703:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>f,patchFetch:()=>m,requestAsyncStorage:()=>p,routeModule:()=>d,serverHooks:()=>g,staticGenerationAsyncStorage:()=>h});var o={};t.r(o),t.d(o,{GET:()=>c});var s=t(3278),n=t(5002),a=t(4877),i=t(5732),u=t(1309);let l=new i.Pp({apiKey:process.env.API_KEY_OPENAI});async function c(e){let{searchParams:r}=new URL(e.url),t=r.get("difficulty")||"high";try{if(!process.env.API_KEY_OPENAI)return console.error("OpenAI API key is not configured"),u.NextResponse.json({error:"OpenAI API key is not configured"},{status:500});let e=(await l.chat.completions.create({model:"gpt-4",messages:[{role:"system",content:`You are generating Final Jeopardy content in the style of the TV show. ${{middle:"Create content suitable for middle school students (grades 6-8). Questions should cover basic history, science, geography, and popular culture that a typical middle school student would learn.",high:"Create content suitable for high school students. Questions should cover standard high school curriculum topics and general knowledge a high school graduate would know.",college:"Create content suitable for college students. Questions can be more complex and cover a broader range of academic subjects, current events, and cultural knowledge.",postgrad:"Create advanced content suitable for post-graduate level. Questions can be highly specific, technical, or cover obscure topics that would challenge well-educated adults."}[t]} In Jeopardy, contestants are given an ANSWER that contains facts and details, and they must respond with a QUESTION.`},{role:"user",content:"Generate a Final Jeopardy category, answer, and question. The answer should be detailed and provide clues, while the question should be in the form of 'What is...', 'Who is...', or 'Where is...'. Return in JSON format with fields: category, answer, question"}],temperature:.7,max_tokens:500})).choices[0].message.content;if(console.log("OpenAI Response:",e),!e)throw Error("No content received from OpenAI");try{let r=JSON.parse(e);if(!r.category||!r.answer||!r.question)throw Error("Invalid response format");return u.NextResponse.json(r)}catch(r){return console.error("JSON Parse Error:",r,"Content:",e),u.NextResponse.json({error:"Invalid response format from AI"},{status:500})}}catch(e){return console.error("Final Jeopardy Error:",e instanceof Error?e.message:e,e),u.NextResponse.json({error:"Failed to generate Final Jeopardy",details:e instanceof Error?e.message:"Unknown error"},{status:500})}}let d=new s.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/final-jeopardy/route",pathname:"/api/final-jeopardy",filename:"route",bundlePath:"app/api/final-jeopardy/route"},resolvedPagePath:"/Users/charlie.white/src/jeopardy/app/api/final-jeopardy/route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:p,staticGenerationAsyncStorage:h,serverHooks:g}=d,f="/api/final-jeopardy/route";function m(){return(0,a.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:h})}}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),o=r.X(0,[379,833,732],()=>t(5703));module.exports=o})();